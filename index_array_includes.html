<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>JavaScript Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

  </head>

  <body>
    <div id="conatiner">
      <h1>JavaScript Test Memo</h1>
      <h2>Array.prototype.includes()</h2>
      
      <p>テスト内容はChromeのコンソールに表示＋参考ページを元にサンプル作成</p>

      <script>
        // JavaScriptのArray.some()とArray.includes()は、両方とも配列内の要素に特定の値があるかを判別するのに使える
        // どのように使い分ければいいのか？

        // includes() ... 特定の要素が配列に含まれているかどうか
        const cats_ary = ["mike", "kuro", "shiro", "tora", "tama", "sabi", "mie"];
        const target_name = "tora";
        const result1 = cats_ary.includes(target_name);
        console.log(result1); // true

        // some() ... 配列内の少なくとも1つの要素は渡された関数を通るかどうか、※見つかればそこで終了
        const result2 = cats_ary.some(element => element === target_name);
        console.log(result2); // true

        // 要素がオブジェクトの配列に対してinclude()を使用してみる
        const cats_ary2 = [
          { color: "三毛", name: "ミケ", age: 10 },
          { color: "黒", name: "クロ", age: 6 },
          { color: "茶・黄", name: "トラ", age: 3 }
        ];
        const target_cat = [{ color: "黒", name: "クロ", age: 6 }];
        const result3 = cats_ary2.includes(target_cat);
        console.log(`result(include): ${result3}`); // result(include): false、※違うと出る

        // ↑オブジェクトを比較する時は、「同じ参照元を指し示しているか」で検証される
        // なので、↓のコードはtrueを返す
        const target_cat3 = cats_ary2[1];
        const result4 = cats_ary2.includes(target_cat3);
        console.log(`result(include): ${result4}`); // result(include): true

        // 要素がオブジェクトの配列に対してsome()を使用してみる
        const cats_ary5 = [
          { color: "三毛", name: "ミケ", age: 10 },
          { color: "黒", name: "クロ", age: 6 },
          { color: "茶・黄", name: "トラ", age: 3 }
        ];
        const target_cat5 = {
          color: "黒",
          name: "クロ",
          age: 6
        };
        const result5 = cats_ary5.some(
          cat =>
            cat.color === target_cat5.color &&
            cat.name === target_cat5.name &&
            cat.age === target_cat5.age
        );
        console.log(`result(some): ${result5}`); // result(some): true

        // なので、要素が値の配列のチェックにはincludes()、要素が参照型の配列にはsome()を使うのがいい

        console.log("");

      </script>
      <p class="title">タイトル</p>
      <pre>
      <code class="prettyprint">
        // JavaScriptのArray.some()とArray.includes()は、両方とも配列内の要素に特定の値があるかを判別するのに使える
        // どのように使い分ければいいのか？

        // includes() ... 特定の要素が配列に含まれているかどうか
        const cats_ary = ["mike", "kuro", "shiro", "tora", "tama", "sabi", "mie"];
        const target_name = "tora";
        const result1 = cats_ary.includes(target_name);
        console.log(result1); // true

        // some() ... 配列内の少なくとも1つの要素は渡された関数を通るかどうか、※見つかればそこで終了
        const result2 = cats_ary.some(element => element === target_name);
        console.log(result2); // true

        // 要素がオブジェクトの配列に対してinclude()を使用してみる
        const cats_ary2 = [
          { color: "三毛", name: "ミケ", age: 10 },
          { color: "黒", name: "クロ", age: 6 },
          { color: "茶・黄", name: "トラ", age: 3 }
        ];
        const target_cat = [{ color: "黒", name: "クロ", age: 6 }];
        const result3 = cats_ary2.includes(target_cat);
        console.log(`result(include): ${result3}`); // result(include): false、※違うと出る

        // ↑オブジェクトを比較する時は、「同じ参照元を指し示しているか」で検証される
        // なので、↓のコードはtrueを返す
        const target_cat3 = cats_ary2[1];
        const result4 = cats_ary2.includes(target_cat3);
        console.log(`result(include): ${result4}`); // result(include): true

        // 要素がオブジェクトの配列に対してsome()を使用してみる
        const cats_ary5 = [
          { color: "三毛", name: "ミケ", age: 10 },
          { color: "黒", name: "クロ", age: 6 },
          { color: "茶・黄", name: "トラ", age: 3 }
        ];
        const target_cat5 = {
          color: "黒",
          name: "クロ",
          age: 6
        };
        const result5 = cats_ary5.some(
          cat =>
            cat.color === target_cat5.color &&
            cat.name === target_cat5.name &&
            cat.age === target_cat5.age
        );
        console.log(`result(some): ${result5}`); // result(some): true

        // なので、要素が値の配列のチェックにはincludes()、要素が参照型の配列にはsome()を使うのがいい
      </code>
      </pre>

      <p class="title">参考サイト：</p>

      <p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank">Array.prototype.includes() - MDN - Mozilla</a></p>      
      <p><a href="https://qiita.com/Nossa/items/4a425e57ec4b7eedb7cb" target="_blank">JavaScript の Array.some と Array.includes の使い分け、値・参照型の動作の違い - Qiita</a></p>

    </div>

    <script src="src/array_includes.js"></script>
  </body>
</html>
